# Телеграм-бот для рассылок

Бот умеет рассылать любое сообщение (включая медиа) во все чаты, куда он добавлен. Перед отправкой можно выбрать, какие чаты попадут в рассылку. Дополнительно можно включать/отключать чаты по умолчанию либо полностью удалять их из базы.

## Возможности
- Автоматически запоминает чаты, куда добавлен бот, и забывает удалённые.
- Команды управления списком чатов (`/chats`, `/enable`, `/disable`, `/forget`).
- Мастер рассылки `/broadcast`: отправь сообщение, затем отметь чаты в интерактивном списке и подтвердите отправку.
- Сообщение копируется целиком через `copyMessage`, поэтому поддерживаются любые типы контента.

## Настройка
1. Установи зависимости:
   ```bash
   cd /Users/sergroznov/bot
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
2. Создай файл `.env` рядом с `main.py` (в корне репозитория) и добавь переменные:
   ```env
   BOT_TOKEN=токен_бота
   ADMIN_USER_ID=123456789  # твой telegram user id
   CHAT_STORE_PATH=data/chats.json  # необязательно, путь к файлу с чатами
   ```
3. Запусти бота:
   ```bash
   python -m src.main
   ```

## Как пользоваться
- Добавь бота в нужные чаты (группы/каналы). Он автоматически сохранит их.
- В личном чате с ботом отправь `/chats`, чтобы увидеть список и `chat_id`.
- Используй `/enable <chat_id>` и `/disable <chat_id>`, чтобы управлять включением по умолчанию.
- Запусти `/broadcast` и пришли сообщение (можно с медиа). После этого отметь нужные чаты кнопками и нажми «Отправить».
- Команда `/forget <chat_id>` удалит чат из базы (например, если чат больше не нужен).

## Хранение данных
По умолчанию список чатов хранится в `data/chats.json`. Файл создаётся автоматически. Можно перенастроить путь через переменную окружения `CHAT_STORE_PATH`.
